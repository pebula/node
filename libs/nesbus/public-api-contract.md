## API Report File for "@pebula/nesbus"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { BaseRpcContext } from '@nestjs/microservices/ctx-host/base-rpc.context';
import { CallHandler } from '@nestjs/common';
import { Ctx } from '@nestjs/microservices';
import { CustomTransportStrategy } from '@nestjs/microservices';
import { DynamicModule } from '@nestjs/common';
import { FactoryProvider } from '@nestjs/common';
import { InstanceWrapper } from '@nestjs/core/injector/instance-wrapper';
import { LoggerService } from '@nestjs/common';
import { MessageHandler } from '@nestjs/microservices';
import { MessageHandlerOptions } from '@azure/service-bus';
import { MessagingError } from '@azure/service-bus';
import { ModulesContainer } from '@nestjs/core';
import { Observable } from 'rxjs';
import { OnModuleDestroy } from '@nestjs/common';
import { OnModuleInit } from '@nestjs/common';
import { OperatorFunction } from 'rxjs';
import { Payload } from '@nestjs/microservices';
import { Provider } from '@nestjs/common';
import { ProxySettings } from '@azure/core-http';
import { ReceiveMode } from '@azure/service-bus';
import { Receiver } from '@azure/service-bus';
import { SendableMessageInfo } from '@azure/service-bus';
import { Sender } from '@azure/service-bus';
import { Server } from '@nestjs/microservices';
import { ServiceBusClient } from '@azure/service-bus';
import { ServiceBusClientOptions } from '@azure/service-bus';
import { ServiceBusMessage } from '@azure/service-bus';
import { SessionReceiver } from '@azure/service-bus';
import { SessionReceiverOptions } from '@azure/service-bus';
import { TokenProvider } from '@azure/service-bus';
import { Type } from '@nestjs/common';
import { ValueProvider } from '@nestjs/common';

// @public
export function createSbServer(serverId?: string): SbServer;

export { Ctx }

// @public (undocumented)
export type MetaOrMetaFactory<T> = T | ((helper?: any) => (T | Promise<T>));

export { Payload }

// @public
export function Queue<T = false>(metadata: MetaOrMetaFactory<SbQueueMetadataOptions>): PropOrMethodDecorator<T, MethodDecorator>;

// @public
export const QueueEmitter: (metadata: MetaOrMetaFactory<SbQueueEmitterMetadataOptions>) => PropertyDecorator;

// @public (undocumented)
export class SbContext<T extends keyof SbSubscriberTypeMap = keyof SbSubscriberTypeMap> extends BaseRpcContext<SbContextArgs<T>> {
    constructor(args: SbContextArgs<T>);
    entityName(): string;
    // (undocumented)
    getData<TBody = any>(): TBody;
    // (undocumented)
    getMessage(): ServiceBusMessage;
    resolveClient(emitterReference?: SbEmitterRef): SbEmitterImp | undefined;
    // (undocumented)
    get type(): T;
}

// @public (undocumented)
export type SbContextArgs<T extends keyof SbSubscriberTypeMap = keyof SbSubscriberTypeMap> = [SbSubscriberMetadata<T>, ServiceBusMessage];

// @public (undocumented)
export type SbCorrelationFilter = Partial<CorrelationFilter>;

// @public
export interface SbEmitterImp {
    // (undocumented)
    send(message: SendableMessageInfo): Promise<void>;
}

// @public (undocumented)
export interface SbEmitterMetadataOptions {
    clientId?: string;
    // (undocumented)
    name: string;
}

// @public
export type SbEmitterRef = SbEmitterMetadataOptions;

// @public (undocumented)
export type SbEntityProvisionOption<T extends SbEntityProvision<any>> = SgEntityProvisionType | T;

// @public (undocumented)
export class SbErrorEvent {
    constructor(phase: 'verify' | 'register' | 'listening', options: SbQueueMetadataOptions | SbSubscriptionMetadataOptions, error: Error | MessagingError);
    // (undocumented)
    readonly error: Error | MessagingError;
    // (undocumented)
    readonly options: SbQueueMetadataOptions | SbSubscriptionMetadataOptions;
    // (undocumented)
    readonly phase: 'verify' | 'register' | 'listening';
}

// @public (undocumented)
export abstract class SbErrorHandler {
    // (undocumented)
    abstract onError(event: SbErrorEvent): Promise<void>;
    // (undocumented)
    abstract onMessageError(event: SbMessageErrorEvent): Promise<void>;
}

// @public (undocumented)
export function SbIntercept(...interceptors: Array<SbInterceptor | Type<SbInterceptor>>): <T extends Record<K, OperatorFunction<SbContext<keyof SbSubscriberTypeMap>, any>>, K extends string>(target: T, key: K) => void;

// @public (undocumented)
export interface SbInterceptor<T = any, R = any> {
    // (undocumented)
    intercept(context: SbContext, next: CallHandler<T>): Observable<R> | Promise<Observable<R>>;
}

// @public (undocumented)
export interface SbManagementClientAtomOptions extends SbConnectionOptions<ServiceBusConnectionStringCredentials, ServiceBusAtomManagementClientOptions> {
    // (undocumented)
    defaults?: SbManagementDefaultsAdapter;
}

// @public (undocumented)
export interface SbManagementClientOptions {
}

// @public (undocumented)
export interface SbManagementDefaultsAdapter {
    // (undocumented)
    entities?: {
        queue?: SbQueue;
        topic?: SbTopic;
        subscription?: SbSubscription;
    };
    onNewSubscriptionRules?(topicName: string, subscriptionName: string, providedRules: SbRuleEntityProvision[], subscriptionProvision: SbTopicSubscriptionEntityProvision): SbRuleEntityProvision[];
}

// @public
export type SbMessageEmitter = SbEmitterRef | SbEmitterImp;

// @public (undocumented)
export class SbMessageErrorEvent {
    constructor(options: SbQueueMetadataOptions | SbSubscriptionMetadataOptions, error: Error);
    // (undocumented)
    readonly error: Error;
    // (undocumented)
    readonly options: SbQueueMetadataOptions | SbSubscriptionMetadataOptions;
}

// @public (undocumented)
export interface SbModuleRegisterOptions {
    clients?: SbClientOptions[] | Omit<ValueProvider, 'provide'> | Omit<FactoryProvider, 'provide'>;
    metaFactoryProvider?: Omit<Exclude<Provider, Type<any>>, 'provide'> | Type<any>;
    // (undocumented)
    providers?: Provider[];
    servers: SbServerOptions[] | Omit<ValueProvider, 'provide'> | Omit<FactoryProvider, 'provide'>;
}

// @public (undocumented)
export type SbQueue = Partial<Omit<QueueDetails, 'queueName'>>;

// @public (undocumented)
export interface SbQueueEmitterMetadataOptions extends SbEmitterMetadataOptions {
    // (undocumented)
    provision?: SbEntityProvisionOption<SbQueueEntityProvision>;
}

// @public (undocumented)
export interface SbQueueEntityProvision extends SbEntityProvision<SbQueue> {
    deadLetter?: SbLinkedEntityProvisionOption;
    forward?: SbLinkedEntityProvisionOption;
}

// @public (undocumented)
export interface SbQueueMetadataOptions extends SbSubscriberMetadataOptions {
    // (undocumented)
    provision?: SbEntityProvisionOption<SbQueueEntityProvision>;
}

// @public (undocumented)
export type SbRule = Partial<Omit<RuleDetails, 'createdOn'>>;

// @public (undocumented)
export interface SbRuleEntityProvision extends SbEntityProvision<SbRule> {
    // (undocumented)
    params: SbRule;
    // (undocumented)
    ruleName: string;
}

// @public (undocumented)
export interface SbServerOptions {
    // (undocumented)
    client: SbConnectionOptions<SbCredentials, ServiceBusClientOptions>;
    // (undocumented)
    logger?: LoggerService;
    // (undocumented)
    management?: SbManagementClientOptions[keyof SbManagementClientOptions];
    name?: string;
    registerHandlers?: 'sequence' | 'parallel';
}

// @public (undocumented)
export type SbSqlFilter = Partial<Omit<SqlFilter, 'sqlParameters'>>;

// @public (undocumented)
export interface SbSubscriberMetadataOptions {
    // (undocumented)
    handlerOptions?: MessageHandlerOptions;
    // (undocumented)
    name: string;
    // (undocumented)
    receiveMode: ReceiveMode;
    serverId?: string;
    // (undocumented)
    sessionOptions?: SessionReceiverOptions;
}

// @public (undocumented)
export type SbSubscription = Partial<Omit<SubscriptionDetails, 'subscriptionName' | 'topicName'>>;

// @public (undocumented)
export interface SbSubscriptionMetadataOptions extends SbSubscriberMetadataOptions {
    // (undocumented)
    provision?: SbEntityProvisionOption<SbTopicSubscriptionEntityProvision>;
    // (undocumented)
    topicName: string;
}

// @public (undocumented)
export type SbTopic = Partial<Omit<TopicDetails, 'topicName'>>;

// @public (undocumented)
export interface SbTopicEntityProvision extends SbEntityProvision<SbTopic> {
}

// @public (undocumented)
export interface SbTopicMetadataOptions extends SbEmitterMetadataOptions {
    // (undocumented)
    provision?: SbEntityProvisionOption<SbTopicEntityProvision>;
}

// @public (undocumented)
export interface SbTopicSubscriptionEntityProvision extends SbEntityProvision<SbSubscription> {
    deadLetter?: SbLinkedEntityProvisionOption;
    forward?: SbLinkedEntityProvisionOption;
    rules?: SbRuleEntityProvision[] | ((topicName: string, subscriptionName: string) => SbRuleEntityProvision[]);
    topic?: SbEntityProvisionOption<SbTopicEntityProvision>;
}

// @public (undocumented)
export interface ServiceBusAadTokenCredentials {
    credentials: Parameters<typeof ServiceBusClient['createFromAadTokenCredentials']>[1];
    host: string;
}

// @public (undocumented)
export interface ServiceBusConnectionStringCredentials {
    // (undocumented)
    connectionString: string;
}

// @public (undocumented)
export interface ServiceBusManagementAadTokenCredentials extends ServiceBusAadTokenCredentials {
    // (undocumented)
    namespace: string;
    // (undocumented)
    resourceGroupName: string;
    // (undocumented)
    subscriptionId: string;
}

// @public (undocumented)
export class ServiceBusModule implements OnModuleInit, OnModuleDestroy {
    constructor(discoveryFactory: SbDiscoveryFactoryService, errorHandler?: SbErrorHandler, metadataHelper?: any, clientOptions?: SbClientOptions[], serverOptions?: SbServerOptions[]);
    // (undocumented)
    onModuleDestroy(): Promise<void>;
    // (undocumented)
    onModuleInit(): Promise<void>;
    static register(options: SbModuleRegisterOptions): DynamicModule;
}

// @public (undocumented)
export interface ServiceBusTokenProviderCredentials {
    // (undocumented)
    host: string;
    // (undocumented)
    tokenProvider: TokenProvider;
}

// @public
export function Subscription<T = false>(metadata: MetaOrMetaFactory<SbSubscriptionMetadataOptions>): PropOrMethodDecorator<T, MethodDecorator>;

// @public
export const Topic: (metadata: MetaOrMetaFactory<SbTopicMetadataOptions>) => PropertyDecorator;


// (No @packageDocumentation comment for this package)

```
