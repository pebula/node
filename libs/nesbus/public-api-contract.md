## API Report File for "@pebula/nesbus"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { AmqpAnnotatedMessage } from '@azure/core-amqp';
import { BaseRpcContext } from '@nestjs/microservices/ctx-host/base-rpc.context';
import { CallHandler } from '@nestjs/common';
import { CorrelationRuleFilter } from '@azure/service-bus';
import { Ctx } from '@nestjs/microservices';
import { CustomTransportStrategy } from '@nestjs/microservices';
import { DynamicModule } from '@nestjs/common';
import { FactoryProvider } from '@nestjs/common';
import { InstanceWrapper } from '@nestjs/core/injector/instance-wrapper';
import { LoggerService } from '@nestjs/common';
import { MessageHandler } from '@nestjs/microservices';
import { MessagingError } from '@azure/service-bus';
import { ModulesContainer } from '@nestjs/core';
import { Observable } from 'rxjs';
import { OnModuleDestroy } from '@nestjs/common';
import { OnModuleInit } from '@nestjs/common';
import { OperationOptionsBase } from '@azure/service-bus';
import { OperatorFunction } from 'rxjs';
import { Payload } from '@nestjs/microservices';
import { Provider } from '@nestjs/common';
import { QueueProperties } from '@azure/service-bus';
import { RuleProperties } from '@azure/service-bus';
import { Server } from '@nestjs/microservices';
import { ServiceBusAdministrationClientOptions } from '@azure/service-bus';
import { ServiceBusClient } from '@azure/service-bus';
import { ServiceBusClientOptions } from '@azure/service-bus';
import { ServiceBusMessage } from '@azure/service-bus';
import { ServiceBusMessageBatch } from '@azure/service-bus';
import { ServiceBusReceivedMessage } from '@azure/service-bus';
import { ServiceBusReceiver } from '@azure/service-bus';
import { ServiceBusReceiverOptions } from '@azure/service-bus';
import { ServiceBusSender } from '@azure/service-bus';
import { ServiceBusSessionReceiver } from '@azure/service-bus';
import { ServiceBusSessionReceiverOptions } from '@azure/service-bus';
import { SqlRuleFilter } from '@azure/service-bus';
import { SubscribeOptions } from '@azure/service-bus';
import { SubscriptionProperties } from '@azure/service-bus';
import { TokenCredential } from '@azure/service-bus';
import { TopicProperties } from '@azure/service-bus';
import { Type } from '@nestjs/common';
import { ValueProvider } from '@nestjs/common';

// @public
export function createSbServer(serverId?: string): SbServer;

export { Ctx }

// @public (undocumented)
export type MetaOrMetaFactory<T> = T | ((helper?: any) => (T | Promise<T>));

export { Payload }

// @public
export function Queue<T = false>(metadata: MetaOrMetaFactory<SbQueueMetadataOptions>): PropOrMethodDecorator<T, MethodDecorator>;

// @public
export const QueueEmitter: (metadata: MetaOrMetaFactory<SbQueueEmitterMetadataOptions>) => PropertyDecorator;

// @public (undocumented)
export class SbContext<T extends keyof SbSubscriberTypeMap = keyof SbSubscriberTypeMap> extends BaseRpcContext<SbContextArgs<T>> {
    constructor(args: SbContextArgs<T>, receiver: ServiceBusReceiver | ServiceBusSessionReceiver);
    entityName(): string;
    // (undocumented)
    getData<TBody = any>(): TBody;
    // (undocumented)
    getMessage(): ServiceBusReceivedMessage;
    // (undocumented)
    getReceiver(): ServiceBusReceiver | ServiceBusSessionReceiver;
    resolveClient(emitterReference?: SbEmitterRef): SbEmitterImp | undefined;
    // (undocumented)
    get type(): T;
}

// @public (undocumented)
export type SbContextArgs<T extends keyof SbSubscriberTypeMap = keyof SbSubscriberTypeMap> = [SbSubscriberMetadata<T>, ServiceBusReceivedMessage];

// @public (undocumented)
export type SbCorrelationFilter = Partial<CorrelationRuleFilter>;

// @public
export interface SbEmitterImp {
    // (undocumented)
    sendMessages(messages: ServiceBusMessage | ServiceBusMessage[] | ServiceBusMessageBatch | AmqpAnnotatedMessage | AmqpAnnotatedMessage[], options?: OperationOptionsBase): Promise<void>;
}

// @public (undocumented)
export interface SbEmitterMetadataOptions {
    clientId?: string;
    // (undocumented)
    name: string;
}

// @public
export type SbEmitterRef = SbEmitterMetadataOptions;

// @public (undocumented)
export type SbEntityProvisionOption<T extends SbEntityProvision<any>> = SgEntityProvisionType | T;

// @public (undocumented)
export class SbErrorEvent {
    constructor(phase: 'verify' | 'register' | 'listening', options: SbQueueMetadataOptions | SbSubscriptionMetadataOptions, error: Error | MessagingError);
    // (undocumented)
    readonly error: Error | MessagingError;
    // (undocumented)
    readonly options: SbQueueMetadataOptions | SbSubscriptionMetadataOptions;
    // (undocumented)
    readonly phase: 'verify' | 'register' | 'listening';
}

// @public (undocumented)
export abstract class SbErrorHandler {
    // (undocumented)
    abstract onError(event: SbErrorEvent): Promise<void>;
    // (undocumented)
    abstract onMessageError(event: SbMessageErrorEvent): Promise<void>;
}

// @public (undocumented)
export function SbIntercept(...interceptors: Array<SbInterceptor | Type<SbInterceptor>>): <T extends Record<K, OperatorFunction<SbContext<keyof SbSubscriberTypeMap>, any>>, K extends string>(target: T, key: K) => void;

// @public (undocumented)
export interface SbInterceptor<T = any, R = any> {
    // (undocumented)
    intercept(context: SbContext, next: CallHandler<T>): Observable<R> | Promise<Observable<R>>;
}

// @public (undocumented)
export interface SbManagementDefaultsAdapter {
    // (undocumented)
    entities?: {
        queue?: SbQueue;
        topic?: SbTopic;
        subscription?: SbSubscription;
    };
    onNewSubscriptionRules?(topicName: string, subscriptionName: string, providedRules: SbRuleEntityProvision[], subscriptionProvision: SbTopicSubscriptionEntityProvision): SbRuleEntityProvision[];
}

// @public
export type SbMessageEmitter = SbEmitterRef | SbEmitterImp;

// @public (undocumented)
export class SbMessageErrorEvent {
    constructor(options: SbQueueMetadataOptions | SbSubscriptionMetadataOptions, error: Error);
    // (undocumented)
    readonly error: Error;
    // (undocumented)
    readonly options: SbQueueMetadataOptions | SbSubscriptionMetadataOptions;
}

// @public (undocumented)
export interface SbModuleRegisterOptions {
    clients?: SbClientOptions[] | Omit<ValueProvider, 'provide'> | Omit<FactoryProvider, 'provide'>;
    metaFactoryProvider?: Omit<Exclude<Provider, Type<any>>, 'provide'> | Type<any>;
    // (undocumented)
    providers?: Provider[];
    servers: SbServerOptions[] | Omit<ValueProvider, 'provide'> | Omit<FactoryProvider, 'provide'>;
}

// @public (undocumented)
export type SbQueue = Partial<Omit<QueueProperties, 'name'>>;

// @public (undocumented)
export interface SbQueueEmitterMetadataOptions extends SbEmitterMetadataOptions {
    // (undocumented)
    provision?: SbEntityProvisionOption<SbQueueEntityProvision>;
}

// @public (undocumented)
export interface SbQueueEntityProvision extends SbEntityProvision<SbQueue> {
    deadLetter?: SbLinkedEntityProvisionOption;
    forward?: SbLinkedEntityProvisionOption;
}

// @public (undocumented)
export interface SbQueueMetadataOptions extends SbSubscriberMetadataOptions {
    // (undocumented)
    provision?: SbEntityProvisionOption<SbQueueEntityProvision>;
}

// @public (undocumented)
export type SbRule = Partial<Omit<RuleProperties, 'createdAt'>>;

// @public (undocumented)
export interface SbRuleEntityProvision extends SbEntityProvision<SbRule> {
    // (undocumented)
    params: SbRule;
    // (undocumented)
    ruleName: string;
}

// @public (undocumented)
export interface SbSASCredentials {
    // (undocumented)
    connectionString: string;
}

// @public (undocumented)
export interface SbServerOptions {
    // (undocumented)
    client: SbConnectionOptions<ServiceBusClientOptions>;
    // (undocumented)
    logger?: LoggerService;
    // (undocumented)
    management?: SbConnectionOptions<ServiceBusAdministrationClientOptions> & {
        defaults: SbManagementDefaultsAdapter;
    };
    name?: string;
    registerHandlers?: 'sequence' | 'parallel';
}

// @public (undocumented)
export type SbSqlFilter = Omit<SqlRuleFilter, 'sqlParameters'>;

// @public (undocumented)
export interface SbSubscriberMetadataOptions {
    // (undocumented)
    handlerOptions?: ServiceBusReceiverOptions;
    // (undocumented)
    name: string;
    // (undocumented)
    receiveMode: 'peekLock' | 'receiveAndDelete';
    serverId?: string;
    // (undocumented)
    sessionOptions?: ServiceBusSessionReceiverOptions;
    // (undocumented)
    subscribeOptions?: SubscribeOptions;
}

// @public (undocumented)
export type SbSubscription = Partial<Omit<SubscriptionProperties, 'subscriptionName' | 'topicName'>>;

// @public (undocumented)
export interface SbSubscriptionMetadataOptions extends SbSubscriberMetadataOptions {
    // (undocumented)
    provision?: SbEntityProvisionOption<SbTopicSubscriptionEntityProvision>;
    // (undocumented)
    topicName: string;
}

// @public (undocumented)
export interface SbTokenCredentials {
    // (undocumented)
    credential?: TokenCredential;
    // (undocumented)
    namespace: string;
}

// @public (undocumented)
export type SbTopic = Partial<Omit<TopicProperties, 'name'>>;

// @public (undocumented)
export interface SbTopicEntityProvision extends SbEntityProvision<SbTopic> {
}

// @public (undocumented)
export interface SbTopicMetadataOptions extends SbEmitterMetadataOptions {
    // (undocumented)
    provision?: SbEntityProvisionOption<SbTopicEntityProvision>;
}

// @public (undocumented)
export interface SbTopicSubscriptionEntityProvision extends SbEntityProvision<SbSubscription> {
    deadLetter?: SbLinkedEntityProvisionOption;
    forward?: SbLinkedEntityProvisionOption;
    rules?: SbRuleEntityProvision[] | ((topicName: string, subscriptionName: string) => SbRuleEntityProvision[]);
    topic?: SbEntityProvisionOption<SbTopicEntityProvision>;
}

// @public (undocumented)
export class ServiceBusModule implements OnModuleInit, OnModuleDestroy {
    constructor(discoveryFactory: SbDiscoveryFactoryService, errorHandler?: SbErrorHandler, metadataHelper?: any, clientOptions?: SbClientOptions[], serverOptions?: SbServerOptions[]);
    // (undocumented)
    onModuleDestroy(): Promise<void>;
    // (undocumented)
    onModuleInit(): Promise<void>;
    static register(options: SbModuleRegisterOptions): DynamicModule;
}

// @public
export function Subscription<T = false>(metadata: MetaOrMetaFactory<SbSubscriptionMetadataOptions>): PropOrMethodDecorator<T, MethodDecorator>;

// @public
export const Topic: (metadata: MetaOrMetaFactory<SbTopicMetadataOptions>) => PropertyDecorator;

// (No @packageDocumentation comment for this package)

```
