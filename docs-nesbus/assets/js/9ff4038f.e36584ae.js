"use strict";(self.webpackChunknode=self.webpackChunknode||[]).push([[5289],{1839:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var s=t(4848),i=t(8453),r=t(6640);const o={id:"introduction",title:"Introduction",sidebar_label:"1. Introduction"},a=void 0,c={id:"getting-started/introduction",title:"Introduction",description:"NesBus (Nest / Service Bus) is a microservice extension for NestJS that adds support for Azure Service Bus within NestJS in a",source:"@site/docs/getting-started/introduction.md",sourceDirName:"getting-started",slug:"/getting-started/introduction",permalink:"/node/docs-nesbus/docs/getting-started/introduction",draft:!1,unlisted:!1,editUrl:"https://github.com/pebula/node/tree/main/apps/docs/nesbus/docs/docs/getting-started/introduction.md",tags:[],version:"current",frontMatter:{id:"introduction",title:"Introduction",sidebar_label:"1. Introduction"},sidebar:"sidebar",next:{title:"2. Installation",permalink:"/node/docs-nesbus/docs/getting-started/installation"}},d={},l=[{value:"Message Handling",id:"message-handling",level:3},{value:"Client Emitters",id:"client-emitters",level:3},{value:"Easy Setup",id:"easy-setup",level:3},{value:"Leverage Advanced Architecture Patterns",id:"leverage-advanced-architecture-patterns",level:3},{value:"NOTE: @azure/service-bus@7",id:"note-azureservice-bus7",level:2}];function u(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"NesBus"})," (Nest / Service Bus) is a microservice extension for ",(0,s.jsx)(n.strong,{children:"NestJS"})," that adds support for Azure Service Bus within ",(0,s.jsx)(n.strong,{children:"NestJS"})," in a\nsimple and intuitive way."]}),"\n",(0,s.jsx)(n.p,{children:"It simplifies how we use and manage service bus through an declarative API that automate message handling & emitter registration:"}),"\n",(0,s.jsx)(n.h3,{id:"message-handling",children:"Message Handling"}),"\n",(0,s.jsx)(n.p,{children:"Handling incoming service bus message is now as easy as handling incoming REST requests."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"@Controller()\nexport class ServiceBusController {\n  @Queue<MethodDecorator>(({\n    name: 'nesbus-queue.demo'\n  })\n  async myQueueEntity(@Ctx() context: SbContext) {\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"client-emitters",children:"Client Emitters"}),"\n",(0,s.jsxs)(n.p,{children:["Defining service bus emitters (",(0,s.jsx)(n.code,{children:"Sender"}),") requires no logic, you can compose a client emitter in seconds:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"@Injectable()\nexport class ServiceBusEmitClient {\n\n  @QueueEmitter({\n    name: 'nesbus-queue.demo'\n  })\n  myQueueEntity: Sender;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"easy-setup",children:"Easy Setup"}),"\n",(0,s.jsx)(n.p,{children:"The library also helps with service bus entity management through a declarative API for automatic creation\nof service bus entities based on the entities we define in the controllers / services in our application."}),"\n",(0,s.jsxs)(n.p,{children:["We call it ",(0,s.jsx)(n.strong,{children:"provision"}),". [",(0,s.jsx)(r.jd,{to:"docs/guide/provisioning",children:"Read more..."}),"]"]}),"\n",(0,s.jsxs)(n.p,{children:["This allows a ",(0,s.jsx)(n.strong,{children:"code-first"})," approach for service bus management and architecture."]}),"\n",(0,s.jsx)(n.h3,{id:"leverage-advanced-architecture-patterns",children:"Leverage Advanced Architecture Patterns"}),"\n",(0,s.jsxs)(n.p,{children:["By simplifying the work with service bus, ",(0,s.jsx)(n.strong,{children:"Nesbus"})," enables the use of more advanced architecture patterns that you\ncan use to manage the flow of your application."]}),"\n",(0,s.jsxs)(n.p,{children:["Using ",(0,s.jsx)(n.strong,{children:"Observables"})," you can now implement a ",(0,s.jsx)(n.strong,{children:"CQRS"})," or ",(0,s.jsx)(n.strong,{children:"Event Sourcing"})," models out of the box.\nIn addition, ",(0,s.jsx)(n.strong,{children:"Observables"})," along with ",(0,s.jsx)(n.strong,{children:"Interceptors"})," allow us to use plugins that encapsulate behaviors for us."]}),"\n",(0,s.jsxs)(n.p,{children:["For example, the ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(r.jd,{to:"docs/tasks/back-off",children:"SbBackoffRetry plugin"})})," wraps incoming service bus messages and handles them when their handler throws.\nIt will perform a retry to handle them again but with a delay between each try. The delay is not constant and it is based on an algorithm (linear / exponential)\nso the effect of periodic stress on you server is reduced."]}),"\n",(0,s.jsx)(n.h2,{id:"note-azureservice-bus7",children:"NOTE: @azure/service-bus@7"}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"@pebula/nesbus"})," supports ",(0,s.jsx)(n.code,{children:"@azure/service-bus@1.1.6"}),"."]}),(0,s.jsxs)(n.p,{children:["The azure team is currently working on a re-redesigned library, currently in preview (",(0,s.jsx)(n.code,{children:"7.0.0-preview.2"}),").\nOnce version 7 becomes official, ",(0,s.jsx)(n.code,{children:"@pebula/nesbus"})," will support it, with limited backward compatibility to v1 (critical bugs only)."]}),(0,s.jsx)(n.p,{children:"Since version 7 comes with significant breaking changes you should expect some changes in nesbus as well while\nsome will not get noticed due to the abstraction."})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},6640:(e,n,t)=>{t.d(n,{ol:()=>a,vQ:()=>c,jd:()=>d});t(6540);var s=t(6025),i=t(4586),r=t(8774),o=t(4848);function a(e){var n=(0,i.A)(),t=e.symbol;return(0,o.jsx)(r.A,{to:(0,s.A)(""+n.siteConfig.customFields.apiDocPrefix+t.toLowerCase()),children:e.children||t})}function c(e){var n=(0,i.A)(),t=e.type,s=e.symbol,r=e.display,a=n.siteConfig.customFields.azureDocsUrl+"/"+function(e){switch(e){case"arm":return"arm-servicebus";case"schemaType":return"service-bus"}throw new Error("Unknown link segment type "+e)}(t)+"/"+s.toLowerCase();return(0,o.jsx)("a",{href:a,target:"_blank",children:e.children||r||s})}t(1765);function d(e){var n=e.to;return(0,o.jsx)(r.A,{to:(0,s.A)(n),children:e.children})}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(6540);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);