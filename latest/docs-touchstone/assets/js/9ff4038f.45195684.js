"use strict";(self.webpackChunkdocs_touchstone=self.webpackChunkdocs_touchstone||[]).push([[5289],{5893:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var i=t(6870),s=t(5569),o=t(3634);const r={id:"introduction",title:"Introduction",sidebar_label:"1. Introduction"},c=void 0,a={id:"getting-started/introduction",title:"Introduction",description:"touchstone is a metadata-driven benchmarking framework, built on top of benchmark.js",source:"@site/docs/getting-started/introduction.md",sourceDirName:"getting-started",slug:"/getting-started/introduction",permalink:"/node/touchstone/docs/getting-started/introduction",draft:!1,unlisted:!1,editUrl:"https://github.com/pebula/node/tree/main/apps/docs/touchstone/docs/docs/getting-started/introduction.md",tags:[],version:"current",frontMatter:{id:"introduction",title:"Introduction",sidebar_label:"1. Introduction"},sidebar:"sidebar",next:{title:"2. Installation",permalink:"/node/touchstone/docs/getting-started/installation"}},l={},d=[{value:"Declarative Benchmarks",id:"declarative-benchmarks",level:2},{value:"Life Cycle Events",id:"life-cycle-events",level:2},{value:"Composition &amp; Re-use",id:"composition--re-use",level:2},{value:"TouchStone Events",id:"touchstone-events",level:2},{value:"Multiple Suites",id:"multiple-suites",level:2},{value:"Execute",id:"execute",level:2},{value:"Demo",id:"demo",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"touchstone"})," is a metadata-driven benchmarking framework, built on top of ",(0,i.jsx)(n.a,{href:"https://benchmarkjs.com/",children:"benchmark.js"})]}),"\n",(0,i.jsx)(n.h2,{id:"declarative-benchmarks",children:"Declarative Benchmarks"}),"\n",(0,i.jsxs)(n.p,{children:["With ",(0,i.jsx)(n.strong,{children:"touchstone"})," you define your benchmark like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { Suite, Case } from '@pebula/touchstone';\n\n@Suite({ name: 'My First Benchmark Suite' })\nclass MyFirstBenchmarkSuite {\n @Case({ name: 'my-first-benchmark' })\n  firstBenchmark() {\n    /* Benchmarking... */\n  }\n\n  @Case()\n  async secondBenchmark() {\n     // Will automatically detect that it's async. Name is taken from method name.\n    /* Benchmarking... */\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"life-cycle-events",children:"Life Cycle Events"}),"\n",(0,i.jsxs)(n.p,{children:["All ",(0,i.jsx)(n.code,{children:"benchmark.js"})," event are wrapped and delivered in a normalized manner:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"@Suite()\nclass TestSuite {\n  @OnStart() start(event: SuiteStartEvent) { }\n\n  @OnCaseComplete() caseComplete(event: CaseCompleteEvent) { }\n\n  @OnComplete() complete(event: SuiteCompleteEvent) { }\n\n  // @OnReset, @OnAbort, @OnError\n}\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"There are additional, touchstone specific, events..."})}),"\n",(0,i.jsx)(n.h2,{id:"composition--re-use",children:"Composition & Re-use"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"touchstone"})," is fully extensible through inheritance or composition (mixins):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { Suite, Case, Mixin, VegaLiteReporter, SimpleConsoleReporter } from '@pebula/touchstone';\n\n@Suite({ name: 'My First Benchmark Suite' })\nclass MyFirstBenchmarkSuite extends Mixin(SimpleConsoleReporter, VegaLiteReporter) {\n @Case({ name: 'my-first-benchmark' })\n  firstBenchmark() {\n    /* Benchmarking... */\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In the example above we ",(0,i.jsx)(n.code,{children:"Mixin"})," reporting behavior from 2 built-in reporters:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"SimpleConsoleReporter"})," - Will log progress to the console"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"VegaLiteReporter"})," - Will output HTML, SVG and PNG charts using ",(0,i.jsx)(n.a,{href:"https://vega.github.io/vega-lite/",children:"vega-lite"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"touchstone-events",children:"TouchStone Events"}),"\n",(0,i.jsxs)(n.p,{children:["There are 2 ",(0,i.jsx)(n.strong,{children:"touchstone"})," events:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@OnTouchStoneStart()"})," - Fired with the ",(0,i.jsx)(n.code,{children:"TouchStoneStartEvent"})," event context parameter"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@OnTouchStoneEnd()"})," - Fired with the ",(0,i.jsx)(n.code,{children:"TouchStoneEndEvent"})," event context parameter (which contains the ",(0,i.jsx)(n.code,{children:"SuiteResult[]"})," property)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Both events can be registered on any suite."}),"\n",(0,i.jsx)(n.h2,{id:"multiple-suites",children:"Multiple Suites"}),"\n",(0,i.jsxs)(n.p,{children:["You can declare multiple suite's, ",(0,i.jsx)(n.strong,{children:"touchstone"})," will execute them one after the other."]}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsxs)(n.p,{children:["Because multiple suites can be used for a single run it might not make sense to register mixins on the suite.\nFor suite events this might be ok but the ",(0,i.jsx)(n.strong,{children:"touchstone"})," start/end events will trigger multiple times, once for every suite."]}),(0,i.jsx)(n.p,{children:"For this scenario, and in general, we recommend using a container to manage all mixins, configuration, etc...\nThe container events will invoke once for all of the events in the system. (i.e. A case complete event, from any suite, will fire once on the container)"})]}),"\n",(0,i.jsx)(n.h2,{id:"execute",children:"Execute"}),"\n",(0,i.jsxs)(n.p,{children:["To execute the suite/s and start benchmarking you need to invoke the ",(0,i.jsx)(n.code,{children:"touchStone()"})," function."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { Suite, Case, touchStone } from '@pebula/touchstone';\n\n@Suite({ name: 'My First Benchmark Suite' })\nclass MyFirstBenchmarkSuite {\n @Case({ name: 'my-first-benchmark' })\n  firstBenchmark() {\n    /* Benchmarking... */\n  }\n\n  @Case()\n  async secondBenchmark() {\n     // Will automatically detect that it's async. Name is taken from method name.\n    /* Benchmarking... */\n  }\n}\n\nawait touchStone();\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["When using a touchstone configuration container you don't need to call ",(0,i.jsx)(n.code,{children:"touchStone()"}),", the benchmark\nwill automatically execute."]})}),"\n",(0,i.jsx)(n.h2,{id:"demo",children:"Demo"}),"\n",(0,i.jsxs)(n.p,{children:["The following is the output of the a demo benchmark application: ",(0,i.jsx)(o.O2,{to:"benchmarks/benchmark-chart.html",children:"benchmark-chart"})]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},3634:(e,n,t)=>{t.d(n,{z7:()=>u,jd:()=>m,O2:()=>p});var i=t(6326),s=t(5519),o=t(828),r=t(3252),c=t(6870);var a=t(1959),l=t(3129);const d={plain:{color:"#f8f8f2",backgroundColor:"#272822"},styles:[{types:["comment"],style:{color:"rgb(136, 132, 111)"}},{types:["string","changed"],style:{color:"rgb(230, 219, 116)"}},{types:["punctuation","tag","deleted"],style:{color:"rgb(249, 38, 114)"}},{types:["number","builtin"],style:{color:"rgb(174, 129, 255)"}},{types:["variable"],style:{color:"rgb(248, 248, 242)"}},{types:["function","attr-name","inserted"],style:{color:"rgb(166, 226, 46)"}}]},h={codeSnippet:"codeSnippet_FY5W"};function u(e){const n=(0,o.A)().siteConfig.themeConfig.prism||{},[t,s]=(0,i.useState)(!1);(0,i.useEffect)((()=>{s(!0)}),[]);const{isDarkTheme:r}=(0,a.G)(),u=n.theme||d,m=n.darkTheme||u,p=r?m:u,{lang:x="yaml",snippet:g}=e;return(0,c.jsx)(l.f4,{theme:p,code:g,language:x,children:e=>{let{className:n,style:t,tokens:i,getLineProps:s,getTokenProps:o}=e;return(0,c.jsx)("pre",{className:`${n} ${h.codeSnippet}`,style:t,children:i.map(((e,n)=>(0,c.jsx)("div",{...s({line:e,key:n}),children:e.map(((e,n)=>(0,c.jsx)("span",{...o({token:e,key:n})})))})))})}})}function m(e){const{to:n}=e;return(0,c.jsx)(r.A,{to:(0,s.A)(n),children:e.children})}function p(e){const{to:n}=e;return(0,c.jsx)("a",{href:(0,s.A)(n),target:"_blank",children:e.children})}},5569:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var i=t(6326);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);