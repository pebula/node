(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{116:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return p})),n.d(t,"default",(function(){return m}));var a=n(3),r=n(8),o=(n(0),n(277)),i=n(284),s={id:"mixins",title:"Mixins",sidebar_label:"4. Mixins"},c={unversionedId:"basics/mixins",id:"basics/mixins",isDocsHomePage:!1,title:"Mixins",description:"Mixins are the perfect tools to apply functionality and are very similar to mongoose plugins.",source:"@site/docs/basics/mixins.md",slug:"/basics/mixins",permalink:"/node/goosetyped/docs/basics/mixins",editUrl:"https://github.com/pebula/node/tree/main/apps/docs/goosetyped/docs/docs/basics/mixins.md",version:"current",sidebar_label:"4. Mixins",sidebar:"someSidebar",previous:{title:"Documents And SubDocuments",permalink:"/node/goosetyped/docs/basics/documents-and-sub-documents"},next:{title:"Indexes",permalink:"/node/goosetyped/docs/advanced/indexes"}},p=[],l={toc:p};function m(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Mixins are the perfect tools to apply functionality and are very similar to mongoose plugins."),Object(o.b)("p",null,"Let's say we want to add ",Object(o.b)("inlineCode",{parentName:"p"},"createDate")," and ",Object(o.b)("inlineCode",{parentName:"p"},"updateDate")," columns to our ",Object(o.b)("inlineCode",{parentName:"p"},"Customer")," model:"),Object(o.b)("p",null,"The straight-forward approach would ne to use the ",Object(o.b)("inlineCode",{parentName:"p"},"@GtTimestampCreated")," & ",Object(o.b)("inlineCode",{parentName:"p"},"@GtTimestampUpdated")," decorators in the class:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-typescript"},"import { GtDocument, GtModel, GtTimestampCreated, GtTimestampUpdated } from '@pebula/goosetyped';\n\n@GtDocument()\nexport class Customer extends GtModel() {\n  @GtColumn()\n  name: string;\n\n  @GtColumn()\n  age: number;\n\n  @GtTimestampCreated()\n  createDate: Date;\n\n  @GtTimestampUpdated()\n  updateDate: Date;\n}\n")),Object(o.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},Object(o.b)("inlineCode",{parentName:"p"},"@GtTimestampCreated")," & ",Object(o.b)("inlineCode",{parentName:"p"},"@GtTimestampUpdated")," are utility decorators that expose mongoose's built-in ",Object(o.b)(i.a,{type:"schema",hash:"timestamps",mdxType:"MongooseDocsLink"},"timestamps")))),Object(o.b)("p",null,"This is ok but we most probably want to add this capability to other models in our application but not all of them.\nWe can use inheritance but this will limit our possibility of composing capabilities together..."),Object(o.b)("p",null,"Instead, we define a class (does not have to be a document or sub-document...) with the capability we want:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-ts"},"export class TimestampMixin {\n  @GtTimestampCreated()\n  createDate: Date;\n\n  @GtTimestampUpdated()\n  updateDate: Date;\n}\n")),Object(o.b)("p",null,"Now we can mix it into our models where needed:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-ts"},"@GtDocument()\nexport class Customer extends GtModel(TimestampMixin) {\n  @GtColumn()\n  name: string;\n\n  @GtColumn()\n  age: number;\n  updateDate: Date;\n}\n")),Object(o.b)("p",null,"Ohh, we forgot, the ",Object(o.b)("inlineCode",{parentName:"p"},"Customer")," model also needs an ",Object(o.b)("inlineCode",{parentName:"p"},"Owner")," mixin:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-ts"},"export class OwnerMixin {\n  @GtColumn()\n  owner: string;\n}\n")),Object(o.b)("p",null,"Now we can mix it into our models where needed:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-ts"},"@GtDocument()\nexport class Customer extends GtModel(TimestampMixin, OwnerMixin) {\n  @GtColumn()\n  name: string;\n\n  @GtColumn()\n  age: number;\n  updateDate: Date;\n}\n")))}m.isMDXComponent=!0},277:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createContext({}),l=function(e){var t=r.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},m=function(e){var t=l(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),m=l(n),d=a,b=m["".concat(i,".").concat(d)]||m[d]||u[d]||o;return n?r.a.createElement(b,s(s({ref:t},p),{},{components:n})):r.a.createElement(b,s({ref:t},p))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},284:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(16);n(57);t.a=function(e){var t=Object(o.default)(),n=e.type,a=e.hash,i=e.display,s=t.siteConfig.customFields.mongooseDocsUrl+"/"+function(e){switch(e){case"schema":return"guide";case"schemaType":return"SchemaTypes";case"connection":return"Connections";case"model":return"Models";case"document":return"Documents";case"subDocument":return"subdocs";case"query":return"Queries";case"validation":return"Validation";case"middleware":return"Middleware";case"populate":return"Populate";case"discriminator":return"Discriminators";case"plugins":return"Plugins"}throw new Error("Unknown link segment type "+e)}(n).toLowerCase()+".html"+(a?"#"+a:"");return r.a.createElement("a",{href:s,target:"_blank"},e.children||i||a||"")}}}]);